---
# GERRIT version of docker-publish
# generic docker image building + dockerhub publishing tasks

- job-template:
    id: fabric-tna-hardware
    name: '{id}'
    description: |
      Created by {id} job-template from ci-management/jjb/favric-tna-hardware.yaml, script Jenkinsfiles/Jenkinsfile-fabric-tna.groovy
    properties:
      - onf-infra-properties:
          build-days-to-keep: '15'
          artifact-num-to-keep: '15'
    wrappers:
      - onf-infra-rsync-wrappers:
          build-timeout: '{build-timeout}'
    parameters:
      - string:
          name: BUILD_NODE
          default: '{build-node}'
          description: 'Name of the Jenkins build executor to run the job on'

      - string:
          name: SWITCH_NAME
          default: 'x86-64-inventec-d5254-r0'

      - string:
           name: REGISTRY_URL
           default: 'registry.aetherproject.org/stratum-ccp'
           description: 'Private registry URL'

      - string:
          name: DOCKER_IMAGE
          default: 'stratum-bf'

      - string:
          name: DOCKER_IMAGE_TAG
          default: '9.1.0'

    project-type: pipeline
    concurrent: true
    extraEnvironmentVars: ""
    sandbox: true

    dsl: !include-raw-escape: ../../Jenkinsfiles/Jenkinsfile-fabric-tna.groovy
